{"version":3,"sources":["users-test.js"],"names":["test","beforeEach","t","srv","users","context","url","user","fixtures","getUser","options","method","uri","json","body","name","username","password","email","resolveWithFullResponse","response","is","statusCode","deepEqual","todo"],"mappings":";AAAA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;;AAJA;;;AAMAA,cAAKC,UAAL;AAAA,+BAAgB,WAAMC,CAAN,EAAW;AACzB,QAAIC,MAAM,qBAAMC,eAAN,CAAV;AACAF,MAAEG,OAAF,CAAUC,GAAV,GAAgB,MAAM,0BAAOH,GAAP,CAAtB;AACD,GAHD;;AAAA;AAAA;AAAA;AAAA;;AAKA,mBAAK,QAAL;AAAA,gCAAe,WAAMD,CAAN,EAAW;AACxB,QAAIK,OAAOC,mBAASC,OAAT,EAAX;AACA,QAAIH,MAAMJ,EAAEG,OAAF,CAAUC,GAApB;;AAEA,QAAII,UAAU;AACZC,cAAQ,MADI;AAEZC,WAAKN,GAFO;AAGZO,YAAM,IAHM;AAIZC,YAAM;AACJC,cAAMR,KAAKQ,IADP;AAEJC,kBAAUT,KAAKS,QAFX;AAGJC,kBAAUV,KAAKU,QAHX;AAIJC,eAAOX,KAAKW;AAJR,OAJM;AAUZC,+BAAyB;AAVb,KAAd;;AAaA,QAAIC,WAAW,MAAM,8BAAQV,OAAR,CAArB;;AAEA,WAAOH,KAAKW,KAAZ;AACA,WAAOX,KAAKU,QAAZ;;AAEAf,MAAEmB,EAAF,CAAKD,SAASE,UAAd,EAA0B,GAA1B;AACApB,MAAEqB,SAAF,CAAYH,SAASN,IAArB,EAA2BP,IAA3B;AACD,GAxBD;;AAAA;AAAA;AAAA;AAAA;;AA0BAP,cAAKwB,IAAL,CAAU,gBAAV","file":"users-test.js","sourcesContent":["'user strict'\r\n\r\nimport test from 'ava'\r\nimport micro from 'micro'\r\n// import uuid from 'uuid-base62'\r\nimport listen from 'test-listen'\r\nimport request from 'request-promise'\r\nimport fixtures from './fixtures'\r\nimport users from '../users'\r\n\r\ntest.beforeEach(async t => {\r\n  let srv = micro(users)\r\n  t.context.url = await listen(srv)\r\n})\r\n\r\ntest('POST /', async t => {\r\n  let user = fixtures.getUser()\r\n  let url = t.context.url\r\n\r\n  let options = {\r\n    method: 'POST',\r\n    uri: url,\r\n    json: true,\r\n    body: {\r\n      name: user.name,\r\n      username: user.username,\r\n      password: user.password,\r\n      email: user.email\r\n    },\r\n    resolveWithFullResponse: true\r\n  }\r\n\r\n  let response = await request(options)\r\n\r\n  delete user.email\r\n  delete user.password\r\n\r\n  t.is(response.statusCode, 201)\r\n  t.deepEqual(response.body, user)\r\n})\r\n\r\ntest.todo('GET /:username')\r\n"]}